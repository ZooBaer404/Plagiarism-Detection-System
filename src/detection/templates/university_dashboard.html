{% extends "base.html" %}
{% load static %}

{% block content %}
<!-- =========================================================
     PAGE: University Dashboard
     DESCRIPTION:
       Main interface for university accounts.
       Displays instructors, pending approvals,
       repositories, error reports, and upload section.
   ========================================================= -->

<div class="university-dashboard-container h-full bg-neutral-800 text-white flex flex-col min-h-0 min-w-0 overflow-y-auto">

  <!-- =========================================
       HEADER SECTION
       ========================================= -->
  <header class="uni-header flex justify-between p-1">
    <!-- Brand Title -->
    <a href="{% url 'university_dashboard' %}" class="brand-title text-4xl">Plagiarism Detection</a>

    <!-- Page Title -->
    <h1 class="page-title text-2xl">University Account</h1>

    <!-- Profile Icon -->
    <a href="{% url 'university_account' %}" class="profile-icon border-2 p-2" title="Account Information">
      <span>U</span>
    </a>
  </header>

  <!-- =========================================
       MAIN DASHBOARD GRID
       ========================================= -->
  <main class="dashboard-grid grid grid-cols-3 grid-rows-8 flex-1 p-2 gap-2">

    <!-- =========================================
         LEFT COLUMN
         (Instructor Management + Pending Approvals)
       ========================================= -->
    <section class="left-col row-span-8 grid grid-rows-2 gap-2">

      <!-- Instructors Section -->
      <div class="dashboard-box border-2 border-neutral-700 flex flex-col gap-2 p-2">
        <h2 class="text-2xl"><a href="{% url 'university_instructors' %}">Instructor</a></h2>

        <div class="overflow-y-auto">
          {% for approved_instructor in approved_instructors %}
          <div class="item-box border-2 border-neutral-700">{{ approved_instructor.first_name }} {{ approved_instructor.last_name }}</div>  
          {% endfor %}
        </div>
      </div>

      <!-- Pending Instructor Approvals -->
      <div class="dashboard-box border-2 border-neutral-700 flex flex-col gap-2 p-2">
        <h2 class="text-2xl"><a href="{% url 'university_pending' %}">Pending Approval</a></h2>

        <div class="overflow-y-auto">
          {% for pending_instructor in pending_instructors %}
          <div class="item-box border-2 border-neutral-700">{{ pending_instructor.first_name }} {{ pending_instructor.last_name }}</div>
          {% endfor %}
        </div>
        
      </div>
    </section>

    <!-- =========================================
         MIDDLE COLUMN
         (Repositories Overview)
       ========================================= -->
    <div class="row-span-8 grid col-span-2 gap-2">
    
      <section class="repo-box dashboard-box border-2 border-neutral-700 p-2 flex flex-col gap-2">
        <h2 class="text-2xl"><a href="{% url 'university_repositories' %}">Repositories</a></h2>
        
        <div class="repo-header overflow-y-auto">
          <!-- Example Repository Items -->
          {% for document in documents %}
          <div class="repo-item">Document #{{ document.research_document_name }}</div>
          {% endfor %}
        </div>
      </section>
      
      <!-- =========================================
      RIGHT COLUMN
      (Error & Upload Info)
      ========================================= -->
      <section class="errors-box dashboard-box border-2 border-neutral-700 flex flex-col gap-2 p-2">
        <h2 class="text-2xl"><a href="{% url 'university_errors' %}">Errors</a></h2>
        
        <div class="overflow-y-auto">
          {% for documents_error in documents_errors %}
          <div class="item-box border-2 border-neutral-700 p-1">{{ documents_error.research_document_id.research_document_name }} â€” {{ documents_error.error_message }} </div>
          {% endfor %}
        </div>
        
      </section>
      
      <!-- =========================================
      BOTTOM SECTION
      (Repository Upload Area)
      ========================================= -->
      <section class="dashboard-box upload-box border-2 border-neutral-700 flex flex-col gap-2 p-2">
        <h2 class="text-2xl">Upload Repository</h2>
        
        <!-- Upload Button -->
        <div class="upload-btn-wrapper flex flex-col justify-center items-center flex-1 gap-3">
          <a href="{% url 'university_upload' %}" class="upload-area text-3xl border-2 border-neutral-700 pl-20 pr-20 pt-3 pb-3">
            + Upload Files
          </a>
          
          <!-- Description Note -->
          <p class="upload-note">
            These files will be used as references for plagiarism detection.
          </p>
        </div>
      </section>
    </div>

  </main>
</div>
{% endblock %}
