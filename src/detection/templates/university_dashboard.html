{% extends "base.html" %}
{% load static %}

{% block content %}
<!-- =========================================================
     PAGE: University Dashboard
     DESCRIPTION:
       Main interface for university accounts.
       Displays instructors, pending approvals,
       repositories, error reports, and upload section.
   ========================================================= -->

<div class="university-dashboard-container h-full bg-emerald-400 flex flex-col">

  <!-- =========================================
       HEADER SECTION
       ========================================= -->
  <header class="uni-header flex justify-between p-1">
    <!-- Brand Title -->
    <a href="{% url 'university_dashboard' %}" class="brand-title text-4xl">Plagiarism Detection</a>

    <!-- Page Title -->
    <h1 class="page-title text-2xl">University Account</h1>

    <!-- Profile Icon -->
    <a href="{% url 'university_account' %}" class="profile-icon border-2 p-2" title="Account Information">
      <span>U</span>
    </a>
  </header>

  <!-- =========================================
       MAIN DASHBOARD GRID
       ========================================= -->
  <main class="dashboard-grid grid grid-cols-3 grid-rows-8 border-2 border-neutral-700 flex-1 p-2 gap-5">

    <!-- =========================================
         LEFT COLUMN
         (Instructor Management + Pending Approvals)
       ========================================= -->
    <section class="left-col row-span-8 grid grid-rows-2 gap-2">

      <!-- Instructors Section -->
      <div class="dashboard-box border-2 border-neutral-700 flex flex-col gap-2">
        <h2 class="text-2xl"><a href="{% url 'university_instructors' %}">Instructor</a></h2>

        {% for approved_instructor in approved_instructors %}

          <div class="item-box">{{ approved_instructor.first_name }} {{ approved_instructor.last_name }}</div>

        {% endfor %}
      </div>

      <!-- Pending Instructor Approvals -->
      <div class="dashboard-box border-2 border-neutral-700 flex flex-col gap-2">
        <h2 class="text-2xl"><a href="{% url 'university_pending' %}">Pending Approval</a></h2>
        {% for pending_instructor in pending_instructors %}

          <div class="item-box">{{ pending_instructor.first_name }} {{ pending_instructor.last_name }}</div>

        {% endfor %}
        
      </div>
    </section>

    <!-- =========================================
         MIDDLE COLUMN
         (Repositories Overview)
       ========================================= -->
    <div class="row-span-8 grid">
    
      <section class="repo-box dashboard-box">
        <div class="repo-header">
          <h2><a href="{% url 'university_repositories' %}">Repositories</a></h2>
        </div>
        
        <!-- Example Repository Items -->
        {% for document in documents %}
        <div class="repo-item">Document #{{ document.research_document_name }}</div>
        {% endfor %}
      </section>
      
      <!-- =========================================
      RIGHT COLUMN
      (Error & Upload Info)
      ========================================= -->
      <section class="errors-box dashboard-box">
        <h2><a href="{% url 'university_errors' %}">Errors</a></h2>
        
        {% for documents_error in documents_errors %}
        
        <div class="item-box">{{ documents_error.research_document_id.research_document_name }} — {{ documents_error.error_message }} </div>
        
        {% endfor %}
        
      </section>
      
      <!-- =========================================
      BOTTOM SECTION
      (Repository Upload Area)
      ========================================= -->
      <section class="dashboard-box upload-box">
        <h2>Upload Repository</h2>
        
        <!-- Upload Button -->
        <div class="upload-btn-wrapper">
          <a href="{% url 'university_upload' %}" class="upload-area">
            + Upload Files
          </a>
        </div>
        
        <!-- Description Note -->
        <p class="upload-note">
          Upload multiple research documents to your university’s database.
          These files will be used as references for plagiarism detection.
        </p>
      </section>
    </div>

  </main>
</div>
{% endblock %}
