{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<!-- =========================================
     LOAD PAGE-SPECIFIC STYLESHEET
     ========================================= -->
<link rel="stylesheet" href="{% static 'css/instructor_dashboard.css' %}">
{% endblock %}

{% block content %}
<!-- =========================================================
     PAGE: Instructor Dashboard
     DESCRIPTION:
       Main control panel for instructors.
       Includes overview boxes for:
         - Previous Checks
         - Submissions
         - Repository Access
         - File Upload (for plagiarism checking)
   ========================================================= -->

<div class="instructor-dashboard-container">

  <!-- =========================================
       HEADER SECTION
       ========================================= -->
  <header class="instructor-header">
    <!-- Logo/Title -->
    <a href="{% url 'instructor_dashboard' %}" class="brand-title">Plagiarism Detection</a>

    <!-- Page Title -->
    <h1 class="page-title">Instructor Dashboard</h1>

    <!-- Profile Icon -->
    <a href="{% url 'instructor_account' %}" class="profile-icon" title="Account Info">
      <span>I</span>
    </a>
  </header>

  <!-- =========================================
       DASHBOARD GRID LAYOUT
       ========================================= -->
  <main class="dashboard-grid">

    <!-- =========================================
         LEFT COLUMN
         Includes:
           1. Previous Checks
           2. Submissions
       ========================================= -->
    <section class="left-col">

      <!-- Previous Checks -->
      <div class="dashboard-box half-box">
        <h2><a href="{% url 'instructor_checks' %}">Previous Checks</a></h2>
        
        {% for check in previous_checks %}
          <div class="check-item">
            <strong>{{ check.checking_document_id.checking_document_name }}</strong>
            <p>Plagiarized: {{ check.report_result }}%</p>
          </div>
        {% endfor %}

      </div>

      {% comment %} <!-- Submissions -->
      <div class="dashboard-box half-box">
        <h2><a href="{% url 'instructor_submissions' %}">Submissions</a></h2>
        <div class="check-item">
          <strong>AI_Paper.pdf</strong>
          <p>Status: Checking...</p>
        </div>
        <div class="check-item">
          <strong>Data_Analysis.docx</strong>
          <p>Status: Pending Review</p>
        </div>
      </div> {% endcomment %}
    </section>

    {% comment %} <!-- =========================================
         MIDDLE COLUMN
         Repository Access Overview
       ========================================= -->
    <section class="middle-col">
      <div class="dashboard-box full-box repository-box">
        <h2><a href="{% url 'instructor_repository' %}">Repository Access</a></h2>
        <div class="check-item">
          <strong>University Library</strong>
          <p>120+ documents available</p>
        </div>
        <div class="check-item">
          <strong>CS Folder</strong>
          <p>Updated: Oct 25, 2025</p>
        </div>
        <div class="check-item">
          <strong>Research Archives</strong>
          <p>Shared by Kabul University</p>
        </div>
        <div class="check-item">
          <strong>Thesis Collection 2024</strong>
          <p>Download Access Granted</p>
        </div>
      </div>
    </section> {% endcomment %}

    <!-- =========================================
         RIGHT COLUMN
         Upload Area (File submission for check)
         * JS handles file selection & generate button
       ========================================= -->
    <section class="right-col">
      <div class="upload-area dashboard-box">
        <div class="upload-box">
          <div class="upload-icon">⬆️</div>
          <h3>Upload for Check</h3>

          <!-- File Upload Form -->
          <form id="uploadForm" method="POST" enctype="multipart/form-data" action={% url 'instructor_dashboard' %}>
            {% csrf_token %}

            <!-- File Input -->
            <input type="file" id="fileInput" class="file-input" name="document" accept=".pdf">
            <label for="fileInput" class="upload-btn">Choose File</label>

            <!-- File Details (hidden by default) -->
            <div id="fileDetails" class="file-details hidden"></div>

            <!-- Generate Button (revealed via JS) -->
            <button type="submit" id="generateBtn" class="generate-btn hidden">Generate Report</button>
          </form>
        </div>
      </div>
    </section>

  </main>
</div>
{% endblock %}

{% block extra_js %}
<!-- JS logic for upload interactivity -->
<script src="{% static 'js/instructor_dashboard.js' %}"></script>
{% endblock %}
