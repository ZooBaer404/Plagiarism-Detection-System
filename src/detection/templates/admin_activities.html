{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="activities-container bg-slate-100 min-h-full flex flex-col gap-3 flex-1">

  <!-- Header -->
  <header class="admin-header flex justify-between items-center p-3 bg-white border-b border-neutral-300">
    <a href="{% url 'admin_dashboard' %}" class="brand-title text-3xl font-semibold">
      Plagiarism Detection
    </a>

    <h1 class="page-title text-xl font-medium">Admin</h1>

    <a href="{% url 'admin_account' %}"
       class="profile-icon w-10 h-10 flex items-center justify-center rounded-full border border-neutral-700 bg-white hover:bg-neutral-200 transition"
       title="Account Info">
      <span class="font-semibold">A</span>
    </a>
  </header>


  <!-- Activities Panel -->
  <div class="activities-panel p-4 flex flex-col gap-4">

    <h2 class="text-2xl font-semibold">Latest Activities</h2>

    <div class="border border-neutral-400 rounded-xl bg-white shadow-sm overflow-hidden">

      <table class="w-full table-auto text-left text-sm">
        <thead class="bg-neutral-200 border-b border-neutral-400 text-xs uppercase font-semibold">
          <tr>
            <th class="px-4 py-3">User</th>
            <th class="px-4 py-3">Action</th>
            <th class="px-4 py-3">Document Name</th>
            <th class="px-4 py-3">File</th>
            <th class="px-4 py-3">Timestamp</th>
          </tr>
        </thead>

        <tbody class="divide-y divide-neutral-300">

          <!-- Instructor Reports -->
          {% for report in reports %}
          <tr class="hover:bg-neutral-100 transition">
            <td class="px-4 py-3 font-medium whitespace-nowrap">
              {{ report.instructor_id.first_name }} {{ report.instructor_id.last_name }}
            </td>

            <td class="px-4 py-3">
              <span class="px-2 py-1 bg-blue-100 border border-blue-300 rounded text-xs">
                Uploaded checking document
              </span>
            </td>

            <td class="px-4 py-3">
              {{ report.checking_document_name }}
            </td>

            <td class="px-4 py-3 max-w-[240px] truncate">
              {{ report.checking_document_file.name }}
            </td>

            <td class="px-4 py-3">
              {{ report.created_at }}
            </td>
          </tr>
          {% endfor %}


          <!-- University Research Reports -->
          {% for report in university_reports %}
          <tr class="hover:bg-neutral-100 transition">
            <td class="px-4 py-3 font-medium whitespace-nowrap">
              {{ report.university_id.university_name }}
            </td>

            <td class="px-4 py-3">
              <span class="px-2 py-1 bg-green-100 border border-green-300 rounded text-xs">
                Uploaded research document
              </span>
            </td>

            <td class="px-4 py-3">
              {{ report.research_document_name }}
            </td>

            <td class="px-4 py-3 max-w-[240px] truncate">
              {{ report.research_document_file.name }}
            </td>

            <td class="px-4 py-3">
              {{ report.created_at }}
            </td>
          </tr>
          {% endfor %}

        </tbody>
      </table>

    </div>
  </div>

</div>

{% endblock %}
